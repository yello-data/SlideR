---
title: "Ggplot2"
subtitle: "Quantitative Methodology (UPF)"
author: "Jordi Mas Elias"
institute: "<https://www.jordimas.cat/>"
footer: "Quantitative Methodology (UPF)"
logo: logo-upf.png
format: 
  revealjs:
    embed-resources: true
    slide-number: true
    show-slide-number: print
    theme: simple
editor: source
editor_options: 
  chunk_output_type: console
---

## Summary

- Layers
- Row dplyr functions
- Column dplyr functions
- Transform variables

# Warm up {background-color="#e8e8e8"}

## R learning curve

```{r}
library(dplyr)
library(ggplot2)
library(forcats)
theme_set(theme_minimal())
cens_gc <- readRDS("data/cens_gc.rds")
rendacs <- readRDS("data/rendacs.rds")
accidents <- readRDS("data/accidents.rds")
municipi <- readRDS("data/municipi.rds")
lloguer_any <- readRDS("data/lloguer_any.rds")
festivals <- readRDS("data/festivals.rds")
elecc19 <- readRDS("data/elecc19.rds")

rlc <- tibble(class = 1:8,
             knowledge = (1:8)^3)
class <- 6
plot(rlc$class, rlc$knowledge)
points(rlc$class[class], rlc$knowledge[class], col = "red")
```



## Warm up

Paint the fence, first...

![](img/paint_fence.jpeg)

## Warm up

...karate later.

![](img/karate-practice.gif)


## Warm up

Data wrangling

![](img/minority.gif)


# Layers {background-color="#e8e8e8"}

## Basic layers

Almost always, a ggplot consists of three layers^[Layers are separated by `+`, not by a pipe!!!!]:

- 1. Dataframe
- 2. Aesthetics
- 3. Geometry

```{r echo = T, eval = F}
df |> 
  ggplot(aes(aestethics)) +
  geometry()
```



## Optional layers

Optionally, we add more layers, such as:

- 4. Facet
- 5. Coordinates
- 6. Scale
- 7. Theme
- 8. Etc


# Other layers {background-color="#e8e8e8"}


## Facet {.scrollable}

Different plots 

```{r}
lloguer_any |> 
  ggplot(aes(x = preu, y = preu_m2, col = nom_districte)) +
  geom_point() +
  facet_grid(.~any)
```


## Advanced

- Put the aesthetics in the geom function.




